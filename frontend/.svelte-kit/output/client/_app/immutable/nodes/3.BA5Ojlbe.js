import"../chunks/DsnmJJEf.js";import{i as j}from"../chunks/D-A7yCOM.js";import{o as q,e as v,s as N}from"../chunks/BDJC6Cp_.js";import{p as O,f as w,s as i,a as C,g as e,b as h,d as D,c as b,e as s,m as f,n as J,r as _,t as M}from"../chunks/BDVzeZar.js";import{i as U}from"../chunks/DE00MdZp.js";import{r as k}from"../chunks/Cs6Urel8.js";import{b as y}from"../chunks/CTeKP5p8.js";import{g as c}from"../chunks/ccQLpX6y.js";var z=w('<p style="color:red"> </p>'),A=w('<h1>Login</h1> <form><input placeholder="Username" required/> <input type="password" placeholder="Password" required/> <button type="submit">Login</button></form> <!> <p>Sem conta? <a href="/signup">Sign up</a></p> <button>Pagina Principal</button>',1);function V(S,P){O(P,!1);let p=f(""),l=f(""),r=f("");q(()=>{localStorage.getItem("token")&&c("/")});async function x(o){o.preventDefault(),s(r,"");try{const t=await fetch("http://localhost:3000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e(p),password:e(l)})}),a=await t.json();t.ok?(localStorage.setItem("token",a.token),localStorage.setItem("role",a.role),c("/profile")):s(r,a.error||"Login failed.")}catch(t){console.error("Login error:",t),s(r,"Network or server error.")}}function L(){c("/")}j();var u=A(),n=i(C(u),2),m=b(n);k(m);var g=i(m,2);k(g),J(2),_(n);var d=i(n,2);{var I=o=>{var t=z(),a=b(t,!0);_(t),M(()=>N(a,e(r))),h(o,t)};U(d,o=>{e(r)&&o(I)})}var T=i(d,4);y(m,()=>e(p),o=>s(p,o)),y(g,()=>e(l),o=>s(l,o)),v("submit",n,x),v("click",T,L),h(S,u),D()}export{V as component};
