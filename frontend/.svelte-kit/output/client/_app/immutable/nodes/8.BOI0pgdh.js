import"../chunks/DsnmJJEf.js";import{i as j}from"../chunks/D-A7yCOM.js";import{o as q,e as v,s as C}from"../chunks/BDJC6Cp_.js";import{p as N,f as w,s as i,a as O,g as o,b as h,d as D,c as b,e as n,m as c,n as J,r as _,t as M}from"../chunks/BDVzeZar.js";import{i as z}from"../chunks/DE00MdZp.js";import{r as k}from"../chunks/Cs6Urel8.js";import{b as y}from"../chunks/CTeKP5p8.js";import{g as f}from"../chunks/ccQLpX6y.js";var A=w('<p style="color:red"> </p>'),B=w('<h1>Login</h1> <form><input placeholder="Clientname" required/> <input type="password" placeholder="Password" required/> <button type="submit">Login</button></form> <!> <p>Sem conta? <a href="/signup-client">Sign up</a></p> <button>Pagina Principal</button>',1);function V(S,P){N(P,!1);let p=c(""),l=c(""),r=c("");q(()=>{localStorage.getItem("token")&&f("/")});async function x(t){t.preventDefault(),n(r,"");try{const e=await fetch("http://localhost:3000/api/login-client",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_name:o(p),password:o(l)})}),a=await e.json();e.ok?(localStorage.setItem("token",a.token),localStorage.setItem("role",a.role),f("/")):n(r,a.error||"Login failed.")}catch(e){console.error("Login error:",e),n(r,"Network or server error.")}}function L(){f("/")}j();var u=B(),s=i(O(u),2),m=b(s);k(m);var g=i(m,2);k(g),J(2),_(s);var d=i(s,2);{var I=t=>{var e=A(),a=b(e,!0);_(e),M(()=>C(a,o(r))),h(t,e)};z(d,t=>{o(r)&&t(I)})}var T=i(d,4);y(m,()=>o(p),t=>n(p,t)),y(g,()=>o(l),t=>n(l,t)),v("submit",s,x),v("click",T,L),h(S,u),D()}export{V as component};
